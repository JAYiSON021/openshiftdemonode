{"version":3,"sources":["../../../src/admin/controllers/account.js"],"names":["config","db","api","post","authenticate","session","scope","get","req","res","logout","status","send"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;kBAEe,gBAAmB;AAAA,QAAhBA,MAAgB,QAAhBA,MAAgB;AAAA,QAARC,EAAQ,QAARA,EAAQ;;AAC9B,QAAIC,MAAM,wBAAV;;AAEA;AACAA,QAAIC,IAAJ,CAAS,QAAT,EAAmB,mBAASC,YAAT,CACf,OADe,EACN;AACLC,iBAAS,KADJ;AAELC,eAAO;AAFF,KADM,CAAnB;;AAMA;AACAJ,QAAIK,GAAJ,CAAQ,SAAR,gCAAiC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC3CA,YAAIC,MAAJ;AACAD,YAAIE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,yBAArB;AACH,KAHD;;AAMA,WAAOV,GAAP;AACH,C","file":"account.js","sourcesContent":["import mongoose from 'mongoose';\r\nimport Router from 'express';\r\nimport bodyParser from 'body-parser';\r\nimport passport from 'passport';\r\nimport config from '../config';\r\nimport AdminAccount from '../models/account';\r\n\r\nimport { generateAccessTokenAdmin, respond, authenticate} from '../middlewares/authmiddleware';\r\n\r\nexport default ({ config, db}) => {\r\n    let api = Router();\r\n\r\n    // 'admin/account/login'\r\n    api.post('/login', passport.authenticate(\r\n        'local', {\r\n            session: false,\r\n            scope: []\r\n    }), generateAccessTokenAdmin, respond);\r\n\r\n    // '/admin/account/logout'\r\n    api.get('/logout', authenticate, (req, res) => {\r\n        res.logout();\r\n        res.status(200).send('Successfully Logged Out');\r\n    });\r\n\r\n\r\n    return api;\r\n}\r\n"]}